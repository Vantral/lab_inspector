It is hard to decide what makes a person, how someone develops a character and becomes who he is. It is hard because it is not a linear function, the process of child's development is very complicated. However, there are two popular opinions. First one is that a family is the most important factor of this procces, second one is that it is enviroment that influences it the most. 
On the one hand, children spent a considerable time with their parents - it is a fact. Moreover, through that time period children develop a strong conection to their family, parents become role models, someone whose actions kids tend to copy. Therefore, it is not surprising if a child from an abusive family becomes aggressive, lacks empathy and a child from a happy family knows how to be kind and how to love. 
On the other hand, family is not the only thing that a child interacts with, there is also the world. The world is cruel sometimes and that is not a bad thing. The difficulty of coping with many problems on your own makes a person stronger, more responible and independent. Furthermore, meeting completely new and strange people is an integral part of being a human and no parents should take that part away, even if they think it is for child's protection. 
In conclusion, I think that deciding which factor is more important is a waste of time, we will never know that, it is too complicated. It is so because they all are interconnected, therefore the true answers is that all of the factors are important. 